<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Digital declutter | claesto</title>
<meta name="keywords" content="blog, writing, hosting">
<meta name="description" content="Let go and stop hoarding terabytes">
<meta name="author" content="Tom Claessens">
<link rel="canonical" href="//localhost:1313/articles/digital-declutter/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.8dd6f57454653644cba6929524e195dff93a26fa61dce2b3b2629e50b8d12816.css" integrity="sha256-jdb1dFRlNkTLppKVJOGV3/k6Jvph3OKzsmKeULjRKBY=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="//localhost:1313/articles/digital-declutter/">

  <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Digital declutter | claesto" />
<meta name="twitter:description" content="Let go and stop hoarding terabytes" />
<meta property="og:title" content="Digital declutter | claesto" />
<meta property="og:description" content="Let go and stop hoarding terabytes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="//localhost:1313/articles/digital-declutter/" />
    <meta property="og:image" content="//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15.png" /><meta property="article:section" content="articles" />
  <meta property="article:published_time" content="2024-02-13T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2024-02-13T00:00:00&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Articles",
      "item": "//localhost:1313/articles/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Digital declutter",
      "item": "//localhost:1313/articles/digital-declutter/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Digital declutter | claesto",
  "name": "Digital declutter",
  "description": "Let go and stop hoarding terabytes",
  "keywords": [
    "blog", "writing", "hosting"
  ],
  "wordCount" : "1896",
  "inLanguage": "en",
  "image":"//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15.png","datePublished": "2024-02-13T00:00:00Z",
  "dateModified": "2024-02-13T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Tom Claessens"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "//localhost:1313/articles/digital-declutter/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "claesto",
    "logo": {
      "@type": "ImageObject",
      "url": "//localhost:1313/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-articles kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="claesto (Alt + H)">claesto</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/archives/" title="Articles"
                >Articles
                </a>
            </li>
            <li>
                <a href="//localhost:1313/tags/" title="Tags"
                >Tags
                </a>
            </li>
            <li>
                <a href="//localhost:1313/about/" title="About"
                >About
                </a>
            </li>
            <li>
                <a href="//localhost:1313/search/" title="üîç"
                >üîç
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Digital declutter</h1>
    <div class="post-description">Let go and stop hoarding terabytes</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>February 13, 2024</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="//localhost:1313/tags/blog/">Blog</a><a href="//localhost:1313/tags/writing/">Writing</a><a href="//localhost:1313/tags/hosting/">Hosting</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>9 min</span></span>

      
      
    </div>
  </header> 
<figure class="entry-cover">
        <img loading="lazy" srcset="//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15_hu3362489845810385353.png 360w ,//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15_hu4563887135404040323.png 480w ,//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15_hu149050232896533003.png 720w ,//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15.png 788w" 
            sizes="(min-width: 768px) 720px, 100vw" src="//localhost:1313/articles/digital-declutter/Screenshot-2024-02-15.png" alt="" 
            width="788" height="440">
        
</figure><div class="toc side right">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#picking-an-m2-ssd-enclosure" aria-label="Picking an M.2 SSD enclosure">Picking an M.2 SSD enclosure</a></li>
                <li>
                    <a href="#setup-and-disk-encryption" aria-label="Setup and disk encryption">Setup and disk encryption</a></li>
                <li>
                    <a href="#cloud-encryption-and-backup" aria-label="Cloud encryption and backup">Cloud encryption and backup</a></li>
                <li>
                    <a href="#cloud-control" aria-label="Cloud control">Cloud control</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>I started taking photography more seriously about a decade ago. I shot photos in RAW with increasingly higher megapixel cameras, spent a lot of time post-processing photos‚Äîsee my 30K word post about building a custom Adobe Lightroom PC‚Äîand designed and built custom photo stories to share them.</p>
<p>While I would go through the process of culling photos that I published online, I didn‚Äôt do that for what I backed up. I kept everything. I always thought, &ldquo;what if I want to go back to this and edit it differently one day?&rdquo;</p>
<p>I kept every RAW photo I shot, every video, every GoPro clip&hellip; I even kept every phone photo going back to my first iPhone. And why not, storage is cheap and easy, right?</p>
<p>The terabytes kept adding up. I added close to a terabyte with New Zealand. Hundreds of gigs with Africa. When you hit a few terabytes the obvious solution is to move to a NAS, or Network Attached Storage. I wrote about this extensively in 2015 with Storage for Photographers (Part 2).</p>
<p>Years back these were pretty dumb devices that would just appear as a networked drive for your computer to manage. Today, they‚Äôre full-blown personal servers, capable of running self-hosted apps and services. That makes it easy to have them encrypt your data, and automatically back your files up to cloud services, which is probably what you want if you‚Äôre paranoid about backups and try to follow the 3-2-1 rule.</p>
<figure>
    <img loading="lazy" src="https://turbo.paulstamatiou.com/uploads/2017/08/copyright-paulstamatiou_com-DSC05186-1000.jpg"/> 
</figure>

<p>Over the years I paid thousands of dollars just to keep those RAW photos safe. At one point I think I had copies on 3 or 4 separate cloud services.. you know, just in case. I later upgraded to another NAS that was physically a bit smaller.</p>
<p>In hindsight, I couldn&rsquo;t care less about 90% of all that data, if not more. The fact that I had terabytes of available storage made it all too easy to not be picky with what I was backing up and just archive everything.</p>
<p>When it was time to move to a different apartment, I took that as the perfect excuse to simplify. I no longer wanted a NAS in my life. A little whirring box, always making random hard drive noises, always taking up space, always making heat. Though I‚Äôm sure my perspective would be a bit different if I had enough space to hide the NAS in a perfect server closet completely out of sight and mind.</p>
<figure>
    <img loading="lazy" src="Screenshot-2024-02-15.png"/> 
</figure>

<p>I needed to get rid of tons of RAW photos for which I no longer cared. I knew I wouldn‚Äôt be able to get rid of everything and I still wanted maybe 2 TB of local storage, separate from my computer. My first inclination was to just look for a tiny NAS that I could load up with 2.5‚Äù SATA SSDs, or something even better like M.2 NVMe SSDs. I didn‚Äôt find anything I liked‚Äîmost small NAS devices would still require some massive barrel-jack power adapter.</p>
<h2 id="picking-an-m2-ssd-enclosure">Picking an M.2 SSD enclosure</h2>
<p>I ended up deciding to get a small, simple external Thunderbolt SSD enclosure. In particular, I wanted an M.2 NVMe SSD enclosure. M.2 SSDs are much smaller and faster than other modern SSDs using SATA. I wanted an small, bus-powered enclosure that was Thunderbolt 3 or 4, and had some basic heatsink or thermal pad for the SSD.</p>
<p>There were a few options I looked at. The <a href="https://www.amazon.com/dp/B07ZWPH7G3?_encoding=UTF8&amp;psc=1&amp;linkCode=ll1&amp;tag=paulstamatiou-20&amp;linkId=ec9bd7e1c319cc02b39d8045c1d94095&amp;language=en_US&amp;ref_=as_li_ss_tl">Sabrent Rocket Nano</a> looked perfect at first glance due to its tiny size but they don&rsquo;t sell it as an enclosure, and it&rsquo;s only USB-C, not Thunderbolt, so I ruled that out. Then I looked at a Thunderbolt 3 enclosure from Sabrent. Unfortunately, some reviews pointed out issues with performance and reliability that had me concerned. There was also a new Thunderbolt 4 enclosure from Satechi, but it wasn&rsquo;t shipping (and still seems to be out of stock). That aside, it looked like a great option, but it was far too large for some reason.</p>
<p>After a lot of looking I eventually landed on the OWC Envoy Express. I was hoping for a more aesthetically pleasing option but OWC has been a reputable brand I&rsquo;ve been familiar with so it felt like the safe option. I don&rsquo;t like how the Thunderbolt cable is part of the case design (you can detach it but you have to open the case), but it wasn&rsquo;t a dealbreaker for me. At the time I purchased this, it was a bit cheaper at $79.</p>
<figure>
    <img loading="lazy" src="https://turbo.paulstamatiou.com/uploads/2023/04/copyright-paulstamatiou_com-owc-envoy-express-ssd.webp"/> <figcaption>
            The Envoy Express enclosure alongside a cheaper USB-C enclosure I got for another spare SSD I had.
        </figcaption>
</figure>

<p>The Envoy Express enclosure is all metal and seems very well-made so I&rsquo;m quite pleased with it.</p>
<p>As for what SSD to use with the enclosure, I decided to use one I already had: an older 2 TB Samsung 970 Evo. At the time I was also parting out and selling my gaming PC (didn&rsquo;t use it enough after I got an Xbox Series X and it was taking up space) and I decided to repurpose the 2 NVMe SSDs I took from it. If you want to do the same, you can find affordable 1 and 2 TB options from Western Digital, Samsung, and SK Hynix among others. It&rsquo;s when you start looking for 4TB SSDs that the prices go up considerably.</p>
<p>Installing the SSD in the OWC enclosure took less than a minute. There&rsquo;s two screws to open the case, then one more screw to fasten the SSD. The case has a built-in thermal pad that touches the top of the SSD, though I wish it had some sort of cooling for the bottom as well.</p>
<figure>
    <img loading="lazy" src="https://turbo.paulstamatiou.com/uploads/2023/04/copyright-paulstamatiou_com-owc-envoy-express-ssd-2.webp"/> 
</figure>

<h2 id="setup-and-disk-encryption">Setup and disk encryption</h2>
<p>The next thing I did was open up Disk Utility on macOS, format the SSD, then set up encryption. While there&rsquo;s lots of ways to encrypt your data‚Äîlike VeraCrypt which touts plausible deniability with hidden volumes‚ÄîI opted for the encryption functionality built into macOS for simplicity.</p>
<p>With the SSD ready to go, the hard part was determining what photos and data I wanted to from my NAS I wanted to keep and transfer to this SSD. This was made particularly hard as my NAS was very slow. I had gigabit ethernet but that doesn‚Äôt matter, these spinning disks are barely faster than 100MB/s for sequential read even with a RAID setup. So my long process over a week or so was transferring a folder or two to my laptop overnight, as much as I could with the available space I had on my MacBook Pro&rsquo;s internal SSD.</p>
<p>Once on my laptop I had to go through and decide what to delete and what to keep. There were a lot of easy ways I was able to save space by cutting things like GoPro videos of which I had hundreds of gigs from trips. I didn&rsquo;t care for that footage much and the important clips I had already used in other videos elsewhere.</p>
<p>But there&rsquo;s no getting around it, this was an arduous process. For some older trips I only kept the post-processed original size JPGs and deleted the RAWs. Then there were tons of just random photos I deleted. It took me a few days but eventually I was able to shave a few terabytes; enough to fit the important stuff on this 2 TB SSD. (I had a bit of overflow which I tossed on the other USB-C external enclosure I had which I won&rsquo;t use often so the speed isn&rsquo;t important).</p>
<h2 id="cloud-encryption-and-backup">Cloud encryption and backup</h2>
<p>With the photos and data trimmed down and ready to transfer to the SSD, I needed to figure out how I wanted to have this SSD backed up and encrypted on cloud services. For that I turned to Arq.</p>
<p>Arq is a backup power tool for advanced users. It&rsquo;s a standalone Mac app that connects to just about any cloud service including AWS, Backblaze, OneDrive, Wasabi, Google Cloud, as well as all S3-compatible storage providers. The best part is that you bring your own credentials for those cloud services, and you have fine-grained control over how things are backed up, stored, encrypted, and much more.</p>
<figure>
    <img loading="lazy" src="https://turbo.paulstamatiou.com/uploads/2023/04/copyright-paulstamatiou_com-arq-macos-ssd-backup.webp"/> 
</figure>

<p>I decided to separate my photos and other more important data into different folders with different backup strategies. Photos took up most of the 2 TB and I wanted them backed up but I didn&rsquo;t expect to access them frequently so I didn&rsquo;t want to use the Amazon &ldquo;S3 Standard&rdquo; storage class. I decided to use S3 Glacier Instant Retrieval for my photos.</p>
<p>I&rsquo;m no stranger to Glacier, Amazon&rsquo;s slower and cheaper data archival storage tier, and have been using some form of it for a decade, but I never had a great experience. It always felt unpredictable and slow; yes, I realize that&rsquo;s the basically the trade-off you sign up for. As of 2021, Amazon added a new type of Glacier storage called Instant Retrieval. So you get the benefit of more affordable data archival storage along with quicker retrieval times.</p>
<p>There&rsquo;s quite a few S3 storage classes to select from: Standard, Standard Infrequent Access, One Zone Infrequent Access, Glacier Instant Retrieval, Glacier Flexible Retrieval, Glacier Deep Archive. It&rsquo;s important to familiarize yourself with the functionality of the S3 storage class you plan on using. And that&rsquo;s just with AWS, you can to use any other cloud provider you like with Arq.</p>
<h2 id="cloud-control">Cloud control</h2>
<p>However, after all this work slimming down my archives, the job is not done. My NAS was just the first target. I still have a stockpile of data and memories across other services like Google. Take Google Photos for example. Absolutely amazing service. I love the heck out of the product. And while Apple&rsquo;s Photos functionality is great, I&rsquo;ve always loved all that Google Photos had to offer from amazing search to strong sharing functionality.</p>
<p>I just wish Google Photos wasn&rsquo;t owned by Google. I&rsquo;m trying to reduce my reliance on consumer-oriented Big Tech products like this in favor of services where I have more control. Google has been heralded for their data portability tool Google Takeout, which includes Google Photos data, but in my experience using it was all but pleasant.</p>
<p>First, I had to wait days to let the archives prepare, which I understand what needs to happen with this much data so that&rsquo;s fine. But then, I had to download more than a dozen separate zipped files amounting to over 800 GB. I don&rsquo;t even think I had that much space on my laptop, let alone extra space to be able to unzip them all. And once unzipped, I don&rsquo;t recall the files having any sort of helpful organization to make it feasible to trim down moments you don&rsquo;t need. I gave up on that.</p>
<p>Cloud storage services make it all too easy to eagerly backup anything and everything without being intentional. Now we&rsquo;ve all inadvertently become data hoarders.</p>
<p>Just because we have easy access to near-infinite and increasingly more affordable storage doesn&rsquo;t mean we should be using all that space. The next generation of cloud-based services need to design for curation and control. It doesn&rsquo;t feel like an immediate concern, but it will only continue to increase.</p>
<p>These days getting your Google account hacked isn&rsquo;t just about your email. It may be about your entire digital life. This is more than just decluttering, it&rsquo;s about control, security and privacy too.</p>

  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="//localhost:1313/articles/building-homelab/">
    <span class="title">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline></svg>&nbsp;Prev Page</span>
    <br>
    <span>Building a homelab</span>
  </a>
  <a class="next" href="//localhost:1313/articles/how-this-blog-is-created/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>How this blog is created, written and hosted</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2024 <a href="//localhost:1313/">claesto</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>

</body>

</html>
